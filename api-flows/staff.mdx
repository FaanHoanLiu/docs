---
title: "Staff API Flow"
description: ""
---

# Staff API Flow

Describes the journey of a staff member ('expeditor') in the Kitchen Display System.

## Order Display

After the patron places an order, the order appears on the expeditor's KDS. At this stage, the expeditor is only interested in seeing new orders.

### Request

The client needs to fetch all new orders on the current day using the ```orders``` endpoint. The client filters the response, including only the orders with a status of ```Received``` for the current day:

```bash
curl -X GET 'http://{serverUrl}/orders?filter=status.eq~Received|created_at.gte~2025-05-01'
```

### Response

The server returns a ```200``` status code with the response body containing new orders.

Example Response

```bash
{
  "results": [
    {
      "id": "6828b99cd306cfcdcf20b0e1",
      "name": "Jeremy",
      "table_number": 20,
      "status": "Received",
      "priority": 3,
      "dish_ids": [
        "6828b91dd306cfcdcf20b0d7"
      ],
      "special_requests": "No peanuts.",
      "created_at": "2025-05-17T16:30:20.565Z",
      "updated_at": "2025-05-17T16:30:20.565Z",
      "scheduled_at": null
    }  ],
  "total_results": 1
}
```

## Prioritization

The expeditor can adjust the priority of the order (from 1 to 5), increasing the priority to 1 for orders that require immediate attention.

### Request

To allow the expeditor to change a dish's priority, it uses the ```orders``` endpoint:

```bash
curl -X PUT 'http://{serverUrl}/orders/{id}'
```
The request body contains the JSON for the order resource with the priority modified:

```bash
{
  "id": "6828b99cd306cfcdcf20b0e1",
  "name": "Jeremy",
  "table_number": 20,
  "status": "Received",
  "priority": 1,
  "dish_ids": [
    "6828b91dd306cfcdcf20b0d7"
  ],
  "special_requests": "No peanuts.",
  "created_at": "2025-05-17T16:30:20.565Z",
  "updated_at": "2025-05-17T16:30:20.565Z",
  "scheduled_at": null
}
```


### Response

The server responds with a ```200`` status code with the response body containing the updated resource.

## Initiating Preparation

Now that a dish is prioritized, the expeditor can initiate the preparation of the order by settingthe order status to ```In Progress```

### Request

To do this, the client uses the ```orders``` endpoint.

```bash
curl -X PUT 'http://{serverUrl}/orders/{id}'
```

The request body contains the JSON for the order resource with the ```status``` modified from ```Received``` to ```In Progress```.

### Response

The server responds with a ```200``` status code with the response body containing the updated order resource.

## Order Prepration by Stations

Each dish in the order is assigned to a specific station (e.g. cold, hot, beverages). Stations responsible for each dish see their respective parts of the order on their KDS.

### Request

 To do this, the client needs to use the ```dishes``` endpoint to view an order's dishes, filtering the response to only include dishes belonging to a specific ```station```:

 ```bash
 curl -X GET 'http://{serverUrl}/orders/{id}/dishes?filter=station.eq~hot&fields=name|image_name'
 ```

### Response

The server returns a ```200``` status code with the response body containing all the dishes part of the order that belong to the specified station:

```bash
{
  "results": [
    {
      "id": "6828b91dd306cfcdcf20b0d7",
      "name": "Pappardelle al Cinghiale",
      "image_name": "pappardelle_al_cinghiale"
    }
  ],
  "total_results": 1
}
```